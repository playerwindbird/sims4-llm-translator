# 模拟人生4 XML 翻译器

本项目用于将模拟人生4的 XML 本地化文件使用 LLM 翻译成目标语言。

## 输入与输出

本工具的数据输入是 **The Sims 4 Translator** 导出的 xml 文件，`./examples/jellypaw.xml` 是其中一个示例。

xml 文件中，Source 是翻译的源语言内容，而 Dest 里是目标语言的内容。

## 工作流程

首先，本工具将 xml 文件中的字符串提取出来，整理成 json 格式：

```json
{
    "086de50b": "jellypaws - Weighted Tiger Plush",
    "d98e92c1": "jellypaws on tumblr",
    // ... 其他所有的字符串在此处省略
}
```

其中 key 是 xml 文件中的 id，value 是 Source 的内容。

此时，工具会显示所有提取出来的字符串的原文，并显示对应译文的输入框。

然后，用户可以使用 LLM 翻译工具进行翻译。LLM 翻译有两种模式，手动模式，或是自动模式。使用翻译工具时，只输出没有翻译字段。

在手动模式下，json 和提示词文本将直接输出到页面中。用户需要手动将文本复制到 LLM 聊天的对话框中，再将它返回的 json 复制到工具里提交。而自动模式则只需要填入 API Key 和地址、模型，由本工具调用后，自动提取 json。

在获得翻译好的 json 之后，本工具会将 json 里的内容再逐个根据 id 填回文本框中。

在回填的过程中，本工具会检查并确保所有的字段都被翻译了。如果有缺失，则使用红色高亮提醒。

最后，用户可以点击保存按钮，下载翻译好的 xml 文件。该文件应该和源文件格式、结构都一致，只替换 Dest 部分的内容。

## 技术实现

本项目是一个 SPA ，使用 React + shadcn ui 实现，完全运行在浏览器本地，没有服务端。使用 vite 开发、打包。